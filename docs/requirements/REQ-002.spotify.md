---
id: REQ-002
domain: requirements
status: approved
source_of_truth: false
related: [ARC-001, TECH-002]
acceptance:
  - "Given librespot container is running, when user opens Spotify app, then 'snapMULTI' appears in device list."
  - "Given Spotify Connect session is active, when user plays music, then audio streams to snapserver."
  - "Given mDNS is working, when librespot starts, then it registers with Avahi for discovery."
derived_from: [VISION-002]
---

# REQ-002: Spotify Connect Integration

## Description

Librespot provides Spotify Connect functionality, allowing any Spotify Premium user to stream music directly to the snapMULTI server. The server appears as a speaker in the Spotify app.

## Behavior

1. Librespot registers as a Spotify Connect device via mDNS
2. Device name configurable via `SPOTIFY_NAME` environment variable
3. Audio output goes to `/audio/spotify_fifo` in 44100:16:2 format
4. Requires Spotify Premium subscription
5. Automatic reconnection on network interruption

## Configuration

- `SPOTIFY_NAME`: Custom device name (default: hostname)
- D-Bus socket mount required for Avahi access

## Dependencies

- Avahi daemon must be running on host
- Snapserver must be healthy
- Network connectivity to Spotify servers
