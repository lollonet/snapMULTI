---
id: REQ-020
domain: requirements
status: approved
source_of_truth: false
related: [ARC-003, TECH-003]
acceptance:
  - "Given fresh Raspberry Pi OS, when user runs prepare-sd.sh, then SD card is configured for zero-touch boot."
  - "Given SD card is inserted, when Pi boots, then all services start automatically."
  - "Given any Linux host, when user runs deploy.sh, then Docker and all services are installed."
derived_from: [VISION-001]
---

# REQ-020: Zero-Touch SD Card Installation

## Description

The prepare-sd.sh script configures an SD card for automatic first-boot installation. User flashes Raspberry Pi OS, runs the script, and the Pi becomes a dedicated audio server on first boot.

## Behavior

1. Detects mounted boot partition
2. Copies firstboot.sh to run on initial boot
3. Configures network wait and Docker installation
4. Creates directory structure for containers
5. Pulls and starts all services automatically

## Scripts

- `scripts/prepare-sd.sh`: Runs on host to prepare SD card
- `scripts/firstboot.sh`: Runs on Pi during first boot
- `scripts/deploy.sh`: Manual deployment for any Linux host

## First Boot Sequence

1. Wait for network connectivity (gateway detection)
2. Install Docker via official APT repository
3. Clone repository to /opt/snapmulti
4. Run deploy.sh for configuration
5. Start all containers
6. Verify health checks pass

## Dependencies

- Raspberry Pi OS (64-bit recommended)
- Network connectivity during first boot
- Sufficient storage for Docker images (~2GB)
