---
id: REQ-003
domain: requirements
status: approved
source_of_truth: false
related: [ARC-001, TECH-002]
acceptance:
  - "Given shairport-sync container is running, when user opens AirPlay menu, then 'snapMULTI' appears."
  - "Given AirPlay session is active, when user plays audio, then audio streams to snapserver."
  - "Given Apple device is on same network, when discovering AirPlay devices, then server is found via mDNS."
derived_from: [VISION-002]
---

# REQ-003: AirPlay Receiver

## Description

Shairport-sync provides AirPlay receiver functionality, allowing any Apple device (iPhone, iPad, Mac) to stream audio to the snapMULTI server.

## Behavior

1. Shairport-sync registers as an AirPlay device via mDNS
2. Device name configurable via `AIRPLAY_NAME` environment variable
3. Audio output goes to `/audio/airplay_fifo` in 44100:16:2 format
4. Supports AirPlay 1 protocol
5. Automatic session handling on device disconnect

## Configuration

- `config/shairport-sync.conf`: Shairport-sync settings
- `AIRPLAY_NAME`: Custom device name (default: hostname)
- D-Bus socket mount required for Avahi access

## Dependencies

- Avahi daemon must be running on host
- Snapserver must be healthy
- Apple device on same network segment
