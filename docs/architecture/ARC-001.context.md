---
id: ARC-001
domain: architecture
status: approved
source_of_truth: false
related: [REQ-001, REQ-002, REQ-003, REQ-010]
---

# ARC-001: System Context and Boundaries

## Context Diagram

```mermaid
C4Context
    title System Context: snapMULTI

    Person(user, "Home User", "Plays music from various sources")

    System(snapmulti, "snapMULTI Server", "Multiroom audio distribution")

    System_Ext(spotify, "Spotify", "Streaming service")
    System_Ext(apple, "Apple Device", "AirPlay source")
    System_Ext(nas, "NAS/Storage", "Music library")

    Boundary(home, "Home Network") {
        System_Ext(client1, "Living Room Speaker", "Snapclient")
        System_Ext(client2, "Kitchen Speaker", "Snapclient")
        System_Ext(client3, "Bedroom Speaker", "Snapclient")
    }

    Rel(user, spotify, "Controls playback")
    Rel(user, apple, "AirPlay from")
    Rel(spotify, snapmulti, "Spotify Connect")
    Rel(apple, snapmulti, "AirPlay stream")
    Rel(nas, snapmulti, "Music files (NFS/SMB)")
    Rel(snapmulti, client1, "Synchronized audio")
    Rel(snapmulti, client2, "Synchronized audio")
    Rel(snapmulti, client3, "Synchronized audio")
```

## System Boundaries

### Inside the System
- Snapcast server (audio distribution)
- MPD (local music playback)
- Librespot (Spotify Connect)
- Shairport-sync (AirPlay)
- myMPD (web interface)
- Tidal bridge (optional)

### Outside the System
- Snapcast clients (separate installation)
- Music storage (NAS, USB drive)
- Streaming services (Spotify, Tidal)
- Apple devices (AirPlay sources)
- Network infrastructure (router, WiFi)

## Quality Attributes

| Attribute | Target | Rationale |
|-----------|--------|-----------|
| Sync accuracy | <10ms | Imperceptible audio delay |
| Startup time | <5 min | Usable shortly after boot |
| Availability | 99% uptime | Home audio should always work |
| Recovery | Auto-restart | No manual intervention needed |
