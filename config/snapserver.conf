# Snapserver configuration
# Multiroom audio server
# Adjust max_clients based on your needs (0 = unlimited)

[server]
datadir = /data/

# mDNS/Bonjour service publishing
mdns_enabled = true

[http]
enabled = true
bind_to_address = 0.0.0.0
port = 1780
# doc_root = /usr/share/snapweb  # Not installed - web UI disabled

# Enable mDNS publishing for HTTP API
publish_http = true
publish_https = false

[tcp-control]
enabled = true
bind_to_address = 0.0.0.0
port = 1705

# Enable mDNS publishing for TCP control
publish = true

[tcp-streaming]
enabled = true
bind_to_address = 0.0.0.0
port = 1704
publish = true

# Stream configuration - Multiple audio sources
# Clients can choose which stream to play via Snapcast client/app

[stream]
# Source 1: MPD (local music library)
source = pipe:////audio/snapcast_fifo?name=MPD

# Source 2: TCP input - Any app can stream to port 4953
# Example: ffmpeg -i http://stream.example.com -f s16le -ar 48000 -ac 2 tcp://raspy:4953
source = tcp://0.0.0.0:4953?name=TCP-Input&mode=server

# Source 3: AirPlay - Apple devices (iPhone, iPad, Mac)
# Connect from iOS: Control Center → AirPlay → Select "snapMULTI"
# Reads from shairport-sync container via named pipe
source = pipe:////audio/airplay_fifo?name=AirPlay

# Source 4: Spotify Connect - Stream from Spotify app (requires Premium)
# Open Spotify → Connect to a device → Select "snapMULTI"
# Reads from librespot container via named pipe
source = pipe:////audio/spotify_fifo?name=Spotify

# --- Available sources (uncomment to enable) ---
# See docs/SOURCES.md for full parameter reference

# Source 5: ALSA capture (line-in, mic, loopback)
# Requires: devices: [/dev/snd:/dev/snd] in docker-compose.yml
#source = alsa:///?name=LineIn&device=hw:0,0

# Source 6: Meta stream (auto-switch between sources)
# Plays highest-priority active source (left = highest)
#source = meta:///MPD/Spotify/AirPlay?name=AutoSwitch

# Source 7: File playback (alerts, TTS, doorbell)
# File must be raw PCM matching sampleformat (48000:16:2)
#source = file:///audio/alert.pcm?name=Alert

# Source 8: TCP client (pull from remote audio source)
#source = tcp://192.168.1.100:4953?name=Remote&mode=client

# Common settings for all sources
sampleformat = 48000:16:2
codec = flac
buffer = 2400
chunk_ms = 40
send_to_muted = false
max_clients = 0

[streaming_client]
initial_volume = 100

[logging]
sink = stdout
filter = *:info
